---
æ•´ç†ï¼šMr.Chen
åŸæ–‡æ—¥æœŸï¼š2024å¹´
æ›´æ–°æ—¥æœŸï¼š2025-12-30
åŸæ–‡é“¾æ¥ï¼šhttps://docs.langchain.com/oss/python/langgraph/overview
---

# LangGraphï¼šçŠ¶æ€åŒ–Agentçš„åº•å±‚ç¼–æ’æ¡†æ¶

> ç±»å‹ï¼šAIå·¥ç¨‹
> éš¾åº¦ï¼šé«˜çº§

## æ ¸å¿ƒé—®é¢˜

**å¦‚ä½•æ„å»ºå¯æŒä¹…åŒ–ã€å¯ä¸­æ–­ã€å¯æ¢å¤çš„å¤æ‚Agentç³»ç»Ÿï¼Ÿ**

ç®€å•çš„Agentæ˜¯æ— çŠ¶æ€çš„å‡½æ•°è°ƒç”¨ï¼Œä½†çœŸå®ä¸–ç•Œçš„Agentéœ€è¦ï¼šé•¿æ—¶é—´è¿è¡Œã€äººå·¥å¹²é¢„ã€æ•…éšœæ¢å¤ã€çŠ¶æ€æŒä¹…åŒ–ã€‚LangGraphè§£å†³çš„å°±æ˜¯è¿™ä¸ªåº•å±‚ç¼–æ’é—®é¢˜ã€‚

## è®¾è®¡å“²å­¦

### ç¼–æ’ä¼˜å…ˆäºæŠ½è±¡

> "LangGraph is a low-level orchestration framework and runtime for building, managing, and deploying long-running, stateful agents."

LangGraphçš„å®šä½ï¼š
- **ä¸æ˜¯**é«˜å±‚æŠ½è±¡ï¼ˆé‚£æ˜¯LangChainçš„è§’è‰²ï¼‰
- **æ˜¯**åº•å±‚ç®¡é“ï¼ˆå¤„ç†Agentç³»ç»Ÿçš„"è„æ´»"ï¼‰
- **å¼ºè°ƒ**æ§åˆ¶è€Œéä¾¿åˆ©

### ä¸LangChainçš„å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 åº”ç”¨å±‚                               â”‚
â”‚    (ä½ çš„Agentåº”ç”¨)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           LangChain (é«˜å±‚æŠ½è±¡)                       â”‚
â”‚    Models, Tools, Retrievers, Agents                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           LangGraph (åº•å±‚ç¼–æ’)  â† ä½ åœ¨è¿™é‡Œ            â”‚
â”‚    Graph, State, Nodes, Edges, Checkpoints          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 åŸºç¡€è®¾æ–½                             â”‚
â”‚    LLM APIs, Databases, External Services           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æ´å¯Ÿ**ï¼šLangChainçš„Agentå®ç°å®é™…ä¸Šæ„å»ºåœ¨LangGraphä¹‹ä¸Šã€‚

## åº•å±‚åŸç†

### åŸç†1ï¼šå›¾æ‰§è¡Œæ¨¡å‹

LangGraphå°†Agentå»ºæ¨¡ä¸º**æœ‰å‘å›¾**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  START  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Node A  â”‚â”€â”€â”€â”€â†’â”‚ Node B  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚               â”‚
     â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Node C  â”‚â†â”€â”€â”€â”€â”‚ Node D  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   END   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **Nodes**ï¼šè®¡ç®—å•å…ƒï¼ˆå¤„ç†çŠ¶æ€çš„å‡½æ•°ï¼‰
- **Edges**ï¼šæ§åˆ¶æµï¼ˆèŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥ï¼‰
- **State**ï¼šå…±äº«æ•°æ®ç»“æ„ï¼ˆè´¯ç©¿æ•´ä¸ªå›¾ï¼‰
- **START/END**ï¼šç‰¹æ®ŠèŠ‚ç‚¹ï¼ˆæ ‡è®°å…¥å£/å‡ºå£ï¼‰

è¿™ç§è®¾è®¡æºè‡ªGoogleçš„Pregelå’ŒApache BeamèŒƒå¼ã€‚

### åŸç†2ï¼šçŠ¶æ€å³ä¸€åˆ‡

ä¼ ç»Ÿå‡½æ•°ï¼š`output = f(input)`
LangGraphï¼š`new_state = node(current_state)`

```python
# çŠ¶æ€å®šä¹‰
class AgentState(TypedDict):
    messages: list[Message]
    current_step: str
    tool_results: dict
    final_answer: str | None

# èŠ‚ç‚¹æ“ä½œçŠ¶æ€
def research_node(state: AgentState) -> AgentState:
    # è¯»å–çŠ¶æ€
    query = state["messages"][-1].content

    # æ‰§è¡Œæ“ä½œ
    results = search_tool(query)

    # è¿”å›æ–°çŠ¶æ€
    return {
        **state,
        "tool_results": results,
        "current_step": "analyze"
    }
```

### åŸç†3ï¼šæŒä¹…åŒ–æ‰§è¡Œ

LangGraphçš„æ€æ‰‹çº§ç‰¹æ€§æ˜¯**Durable Execution**ï¼š

| ç‰¹æ€§ | ä¼ ç»ŸAgent | LangGraph |
|------|-----------|-----------|
| å¤±è´¥å¤„ç† | ä»å¤´é‡è¯• | ä»æ£€æŸ¥ç‚¹æ¢å¤ |
| é•¿æ—¶é—´ä»»åŠ¡ | å¯èƒ½è¶…æ—¶ | æŒä¹…åŒ–è¿è¡Œ |
| äººå·¥å¹²é¢„ | éš¾ä»¥å®ç° | å†…ç½®æ”¯æŒ |
| çŠ¶æ€æ£€æŸ¥ | ä¸é€æ˜ | éšæ—¶å¯æŸ¥ |

## æ¶æ„æ€ç»´

### äº”å¤§è®¾è®¡åŸåˆ™

1. **Durable Execution**
   - Agenté€šè¿‡å¤±è´¥æŒä¹…åŒ–
   - ä»æ£€æŸ¥ç‚¹æ¢å¤
   - ä¸ä¸¢å¤±å·¥ä½œè¿›åº¦

2. **Human-in-the-Loop**
   - ä»»æ„ç‚¹æš‚åœ
   - äººå·¥æ£€æŸ¥å’Œä¿®æ”¹çŠ¶æ€
   - ç»§ç»­æ‰§è¡Œ

3. **Stateful Memory**
   - å·¥ä½œè®°å¿†ï¼ˆçŸ­æœŸï¼Œå½“å‰ä»»åŠ¡ï¼‰
   - ä¼šè¯è®°å¿†ï¼ˆé•¿æœŸï¼Œè·¨ä»»åŠ¡ï¼‰

4. **Streaming Support**
   - å®æ—¶è¾“å‡º
   - æ¸è¿›å¼ç»“æœå±•ç¤º

5. **Low-Level Control**
   - æœ€å°æŠ½è±¡
   - æœ€å¤§æ§åˆ¶æƒ

### ä¸å…¶ä»–æ¡†æ¶å¯¹æ¯”

| ç‰¹æ€§ | LangGraph | CrewAI | AutoGen |
|------|-----------|--------|---------|
| æŠ½è±¡å±‚çº§ | ä½ | ä¸­ | ä¸­ |
| çŠ¶æ€ç®¡ç† | ä¸€ç­‰å…¬æ°‘ | éšå¼ | å¯¹è¯å¼ |
| æŒä¹…åŒ– | å†…ç½® | éœ€å®ç° | éœ€å®ç° |
| äººå·¥å¹²é¢„ | å†…ç½® | æœ‰é™ | æœ‰é™ |
| å­¦ä¹ æ›²çº¿ | é™¡å³­ | å¹³ç¼“ | ä¸­ç­‰ |

## å…³é”®å®ç°

```python
from langgraph.graph import StateGraph, START, END
from typing import TypedDict

# 1. å®šä¹‰çŠ¶æ€
class State(TypedDict):
    query: str
    research: str
    analysis: str
    answer: str

# 2. å®šä¹‰èŠ‚ç‚¹
def research(state: State) -> State:
    result = do_research(state["query"])
    return {**state, "research": result}

def analyze(state: State) -> State:
    result = do_analysis(state["research"])
    return {**state, "analysis": result}

def synthesize(state: State) -> State:
    answer = generate_answer(state["analysis"])
    return {**state, "answer": answer}

# 3. æ„å»ºå›¾
graph = StateGraph(State)

# æ·»åŠ èŠ‚ç‚¹
graph.add_node("research", research)
graph.add_node("analyze", analyze)
graph.add_node("synthesize", synthesize)

# æ·»åŠ è¾¹
graph.add_edge(START, "research")
graph.add_edge("research", "analyze")
graph.add_edge("analyze", "synthesize")
graph.add_edge("synthesize", END)

# 4. ç¼–è¯‘å¹¶è¿è¡Œ
app = graph.compile()
result = app.invoke({"query": "What is quantum computing?"})
```

## å®è·µè¦ç‚¹

1. **ä½•æ—¶ä½¿ç”¨LangGraph**
   - éœ€è¦æŒä¹…åŒ–å’Œæ¢å¤
   - éœ€è¦äººå·¥å®¡æ‰¹æ­¥éª¤
   - å¤æ‚çš„å¤šæ­¥éª¤å·¥ä½œæµ
   - éœ€è¦ç²¾ç¡®æ§åˆ¶æ‰§è¡Œæµç¨‹

2. **ä½•æ—¶ä¸éœ€è¦**
   - ç®€å•çš„å•è½®å¯¹è¯
   - ä¸éœ€è¦çŠ¶æ€æŒä¹…åŒ–
   - å¿«é€ŸåŸå‹ï¼ˆç”¨æ›´é«˜å±‚æ¡†æ¶ï¼‰

3. **çŠ¶æ€è®¾è®¡åŸåˆ™**
   - çŠ¶æ€è¦åŒ…å«è¶³å¤Ÿä¿¡æ¯ä»¥æ¢å¤æ‰§è¡Œ
   - é¿å…åœ¨çŠ¶æ€ä¸­å­˜å‚¨å¤§å‹å¯¹è±¡
   - ä½¿ç”¨ç±»å‹æç¤ºç¡®ä¿ç±»å‹å®‰å…¨

## è®¾è®¡æƒè¡¡

| é€‰æ‹© | è·å¾— | ç‰ºç‰² |
|------|------|------|
| ä½å±‚æŠ½è±¡ | å®Œå…¨æ§åˆ¶ | æ›´å¤šä»£ç  |
| æ˜¾å¼çŠ¶æ€ | å¯è§‚æµ‹æ€§ | å¤æ‚åº¦ |
| å›¾æ¨¡å‹ | æ¸…æ™°çš„æ‰§è¡Œæµ | å­¦ä¹ æ›²çº¿ |

## å…³è”èµ„æº

**ğŸ“š ç›¸å…³æ–‡æ¡£**ï¼š
- [æ„å»ºæœ‰æ•ˆAgentç³»ç»Ÿ](./æ„å»ºæœ‰æ•ˆAgentç³»ç»Ÿ.md) - Anthropicçš„Agentè®¾è®¡åŸåˆ™
- [CrewAI](./CrewAI-å¤šAgentåä½œæ¡†æ¶.md) - æ›´é«˜å±‚çš„å¤šAgentæ¡†æ¶
